<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™ºè¡¨ä¼šã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«</title>
    <style>
        body {
            font-family: 'Segoe UI', 'Meiryo', 'system-ui', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .main-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
                gap: 20px;
                padding: 10px;
            }
            .left-section, .right-section {
                width: 100%;
                max-width: none;
            }
            .timer-container {
                padding: 20px;
                margin-bottom: 15px;
            }
            .timer-container.large {
                padding: 30px;
                max-width: 95vw;
            }
            .mode-switch {
                position: static;
                margin-bottom: 20px;
                text-align: center;
            }
            .emergency-stop {
                position: fixed;
                top: 10px;
                left: 10px;
                padding: 10px 15px;
                font-size: 0.9em;
            }
            #currentEvent {
                font-size: 2em;
            }
            #countdown {
                font-size: 3em;
            }
            .timer-container.large #currentEvent {
                font-size: 3em;
            }
            .timer-container.large #countdown {
                font-size: 6em;
            }
        }
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            .timer-container {
                padding: 15px;
            }
            #currentEvent {
                font-size: 1.8em;
            }
            #countdown {
                font-size: 2.5em;
            }
        }
        .left-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .right-section {
            flex: 1;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            padding-right: 10px;
        }
        .right-section::-webkit-scrollbar {
            width: 8px;
        }
        .right-section::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        .right-section::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        .right-section::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        h1 {
            color: #444;
        }
        .timer-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 100%;
            max-width: 500px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        .timer-container.large {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            max-width: 90vw;
            max-height: 90vh;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .timer-container.large #currentTime {
            font-size: 2.5em;
        }
        .timer-container.large #currentEvent {
            font-size: 4em;
            min-height: 80px;
        }
        .timer-container.large #countdown {
            font-size: 8em;
            margin: 20px 0;
        }
        .timer-container.large #nextEvent {
            font-size: 2em;
        }
        .timer-container.large #testBell {
            font-size: 1.2em;
            padding: 15px 30px;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }
        .overlay.active {
            display: block;
        }
        .mode-switch {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            background-color: #fff;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .mode-switch button {
            padding: 8px 16px;
            margin: 0 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .mode-switch button.active {
            background-color: #007bff;
            color: white;
        }
        .mode-switch button.inactive {
            background-color: #f8f9fa;
            color: #6c757d;
        }
        .practice-controls {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-top: 20px;
            text-align: center;
        }
        .practice-info {
            background-color: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: left;
        }
        .practice-info h3 {
            color: #28a745;
            margin-top: 0;
            margin-bottom: 10px;
        }
        .practice-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .practice-info li {
            margin-bottom: 5px;
        }
        .practice-controls button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .practice-controls .start-btn {
            background-color: #28a745;
            color: white;
        }
        .practice-controls .pause-btn {
            background-color: #ffc107;
            color: #212529;
        }
        .practice-controls .reset-btn {
            background-color: #dc3545;
            color: white;
        }
        .practice-controls .skip-btn {
            background-color: #6f42c1;
            color: white;
        }
        .practice-mode .timer-container {
            border: 3px solid #28a745;
        }
        .practice-mode .timer-container.large {
            border: 5px solid #28a745;
        }
        .progress-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 8px;
            background: linear-gradient(90deg, #28a745, #ffc107, #dc3545);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        .timer-container.large .progress-container {
            margin: 25px 0;
        }
        .timer-container.large .progress-bar {
            height: 12px;
        }
        .current-presenter {
            background-color: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
        .time-warning {
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .emergency-stop {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
            display: none;
        }
        .emergency-stop:hover {
            background-color: #c82333;
        }
        .edit-schedule {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-top: 20px;
            display: none;
        }
        .edit-schedule h3 {
            color: #007bff;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .edit-schedule input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .edit-schedule button {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .edit-schedule .save-btn {
            background-color: #28a745;
            color: white;
        }
        .edit-schedule .cancel-btn {
            background-color: #6c757d;
            color: white;
        }
        .edit-schedule .add-btn {
            background-color: #007bff;
            color: white;
        }
        .edit-schedule .remove-btn {
            background-color: #dc3545;
            color: white;
        }
        .schedule-row {
            display: flex;
            gap: 10px;
            margin: 5px 0;
            align-items: center;
        }
        .schedule-row input {
            flex: 1;
        }
        .schedule-row button {
            padding: 5px 10px;
            font-size: 0.9em;
        }
        #currentTime {
            font-size: 1.5em;
            color: #555;
            margin-bottom: 10px;
        }
        #currentEvent {
            font-size: 2.5em;
            font-weight: bold;
            color: #0056b3;
            min-height: 50px;
        }
        #countdown {
            font-size: 4em;
            font-weight: bold;
            color: #d9534f;
            margin-top: 10px;
        }
        #nextEvent {
            font-size: 1.2em;
            color: #777;
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        th {
            background-color: #007bff;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .active {
            background-color: #ffc107 !important;
            font-weight: bold;
        }
        @media (max-width: 600px) {
          .main-container, .mode-switch, .practice-controls, #editScheduleBtn, #editSchedule, .emergency-stop {
            display: none !important;
          }
          .mobile-tabs {
            display: flex;
            width: 100vw;
            max-width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 2000;
            background: #fff;
            border-bottom: 1px solid #eee;
          }
          .mobile-tab-btn {
            flex: 1;
            padding: 18px 0;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            background: none;
            color: #007bff;
            border-bottom: 3px solid transparent;
            transition: border 0.2s;
          }
          .mobile-tab-btn.active {
            border-bottom: 3px solid #007bff;
            background: #f4f4f9;
            color: #0056b3;
          }
          .mobile-tab-content {
            margin-top: 60px;
            padding: 10px;
            width: 100vw;
            max-width: 100vw;
            box-sizing: border-box;
          }
          .mobile-timer, .mobile-schedule {
            display: none;
          }
          .mobile-timer.active, .mobile-schedule.active {
            display: block;
          }
          .timer-container, .right-section, .left-section {
            max-width: 100vw !important;
            width: 100vw !important;
            border-radius: 0 !important;
            box-shadow: none !important;
            margin: 0 !important;
            padding: 10px !important;
          }
          #scheduleTable {
            font-size: 1em;
          }
          h1 {
            font-size: 1.3em;
            margin-top: 70px;
            margin-bottom: 10px;
          }
        }
    </style>
    <!-- è¿½åŠ CSSï¼ˆheadå†…ï¼‰ -->
    <style>
        @media (max-width: 600px) {
          .mobile-timer .countdown-big {
            font-size: 3.5em;
            font-weight: bold;
            color: #d9534f;
            text-align: center;
            margin: 30px 0 10px 0;
            letter-spacing: 2px;
            background: none !important;
            border: none !important;
            box-shadow: none !important;
            padding: 0 !important;
          }
          .mobile-timer .event-big {
            font-size: 1.5em;
            font-weight: bold;
            color: #0056b3;
            text-align: center;
            margin-bottom: 10px;
            background: none !important;
            border: none !important;
            box-shadow: none !important;
            padding: 0 !important;
          }
          .mobile-timer .progress-container {
            height: 14px;
            margin: 25px 0 10px 0;
            border-radius: 8px;
            background: #e9ecef;
            overflow: hidden;
            box-shadow: none !important;
          }
          .mobile-timer .progress-bar {
            height: 14px;
            border-radius: 8px;
            background: linear-gradient(90deg, #28a745, #ffc107, #dc3545);
            transition: width 0.3s;
            box-shadow: none !important;
          }
          .mobile-timer .presenter-mobile {
            font-size: 1.1em;
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            background: none !important;
            border: none !important;
            box-shadow: none !important;
            padding: 0 !important;
          }
          .mobile-timer {
            background: #fff !important;
            box-shadow: none !important;
            border: none !important;
            border-radius: 0 !important;
            padding: 0 !important;
          }
          .mobile-schedule-list {
            margin: 0;
            padding: 0;
            list-style: none;
          }
          .mobile-schedule-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            margin-bottom: 18px;
            padding: 18px 14px 14px 14px;
            font-size: 1.15em;
            display: flex;
            flex-direction: column;
            gap: 6px;
            border-left: 6px solid #007bff;
            transition: background 0.2s, border 0.2s;
          }
          .mobile-schedule-card.active {
            background: #fffbe6;
            border-left: 8px solid #ffc107;
          }
          .mobile-schedule-card .time {
            font-weight: bold;
            color: #007bff;
            font-size: 1.1em;
          }
          .mobile-schedule-card .name {
            font-weight: bold;
            color: #333;
            font-size: 1.2em;
          }
          .mobile-schedule-card .presenter {
            color: #888;
            font-size: 0.95em;
          }
        }
    </style>
    <!-- ã‚¹ãƒãƒ›ç”¨CSSã®ãƒ†ãƒ¼ãƒè¡¨ç¤ºå¼·èª¿ -->
    <style>
    @media (max-width: 600px) {
      .mobile-timer .theme-big {
        font-size: 1.1em;
        color: #333;
        text-align: center;
        margin-bottom: 18px;
        font-weight: bold;
        letter-spacing: 0.5px;
      }
      .mobile-schedule-card .theme {
        color: #222;
        font-size: 1.1em;
        font-weight: bold;
        margin-top: 2px;
      }
    }
    </style>
</head>
<body>

    <!-- ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ -->
    <div class="mode-switch">
        <button id="liveMode" class="active">æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰</button>
        <button id="practiceMode" class="inactive">ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰</button>
    </div>

    <h1 style="text-align: center; margin-bottom: 30px;">å‰µã‚‹\_ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«</h1>

    <div class="main-container">
        <div class="left-section">
            <div class="timer-container">
                <div id="currentTime">--:--:--</div>
                <div id="currentEvent">é–‹å§‹ã¾ã§ãŠå¾…ã¡ãã ã•ã„...</div>
                <div id="countdown">--:--</div>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
                <div class="current-presenter" id="currentPresenter" style="display: none;">
                    ç¾åœ¨ã®ç™ºè¡¨è€…: <span id="presenterName">--</span>
                </div>
                <div id="nextEvent">æ¬¡ã®äºˆå®š: ...</div>
                <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button id="testBell" style="padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">ãƒ™ãƒ«éŸ³ã‚’ãƒ†ã‚¹ãƒˆ</button>
                    <button id="toggleLarge" style="padding: 10px 20px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">ã‚¿ã‚¤ãƒãƒ¼æ‹¡å¤§</button>
                </div>
                
                <!-- ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ç”¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
                <div class="practice-controls" id="practiceControls" style="display: none;">
                    <div class="practice-info">
                        <h3>ğŸ“š ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰</h3>
                        <p><strong>8åˆ†é–“ã®ç™ºè¡¨ç·´ç¿’</strong>ï¼š7åˆ†çµŒéæ™‚ã¨çµ‚äº†æ™‚ã«ãƒ™ãƒ«ãŒé³´ã‚Šã¾ã™</p>
                        <ul>
                            <li><strong>é–‹å§‹</strong>ï¼š8åˆ†é–“ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’é–‹å§‹</li>
                            <li><strong>ãƒªã‚»ãƒƒãƒˆ</strong>ï¼šã‚¿ã‚¤ãƒãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦æœ€åˆã‹ã‚‰</li>
                        </ul>
                        <p><strong>ãƒ™ãƒ«éŸ³</strong>ï¼š7åˆ†çµŒéæ™‚ï¼ˆæ®‹ã‚Š1åˆ†ï¼‰ã¨8åˆ†çµŒéæ™‚ï¼ˆçµ‚äº†ï¼‰ã«é³´ã‚Šã¾ã™</p>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <strong>ç·´ç¿’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</strong>
                    </div>
                    <button class="start-btn" id="startPractice">â–¶ï¸ é–‹å§‹</button>
                    <button class="reset-btn" id="resetPractice">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
            </div>
        </div>
        
        <div class="right-section">
            <div style="margin-bottom: 15px; text-align: center;">
                <button id="editScheduleBtn" style="padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">ğŸ“ ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç·¨é›†</button>
            </div>
            
            <div class="edit-schedule" id="editSchedule">
                <h3>ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç·¨é›†</h3>
                <div id="scheduleEditor">
                    <!-- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ãŒã“ã“ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
                </div>
                <div style="margin-top: 15px;">
                    <button class="add-btn" id="addScheduleRow">â• è¡Œã‚’è¿½åŠ </button>
                    <button class="save-btn" id="saveSchedule">ğŸ’¾ ä¿å­˜</button>
                    <button class="cancel-btn" id="cancelEdit">âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </div>
            
            <!-- ãƒ†ãƒ¼ãƒ–ãƒ«éƒ¨åˆ† -->
            <table id="scheduleTable">
                <thead>
                    <tr>
                        <th>æ™‚é–“</th>
                        <th>ç™ºè¡¨ç­</th>
                        <th>ãƒ†ãƒ¼ãƒ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>10:55-11:00</td><td></td><td>ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ã‚»ãƒ¬ãƒ¢ãƒ‹ãƒ¼</td></tr>
                    <tr><td>11:00-11:08</td><td>1ç­</td><td>AIç›¸è«‡å“¡ã‚’å‰µã‚‹</td></tr>
                    <tr><td>11:08-11:16</td><td>2ç­</td><td>ãƒªãƒã‚¤ãƒãƒ«ã‚’å‰µã‚‹ ï½èº«è¿‘ã«æ–°ã—ã„äº¤æµã‚’ï½</td></tr>
                    <tr><td>11:16-11:24</td><td>3ç­</td><td>å­¦ã³ã®ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‰µã‚‹</td></tr>
                    <tr><td>11:24-11:32</td><td>4ç­</td><td>å¯è¦–åŒ–ã‚’å‰µã‚‹</td></tr>
                    <tr><td>11:32-11:40</td><td>5ç­</td><td>ã€Œå¾©æ´»ã€ã‚’å‰µã‚‹</td></tr>
                    <tr><td>11:40-11:48</td><td>6ç­</td><td>éŸ³æ¥½ã‚’å‰µã‚‹</td></tr>
                    <tr><td>11:48-11:56</td><td>7ç­</td><td>å‹•ãã‚’å‰µã‚‹</td></tr>
                    <tr><td>11:56-12:04</td><td>8ç­</td><td>æ•£æ­©é“ã‚’å‰µã‚‹</td></tr>
                    <tr><td>12:04-12:12</td><td>9ç­</td><td>å¤§å®®ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã§SDGsçš„ãªå–ã‚Šçµ„ã¿ã‚’å‰µã‚‹</td></tr>
                    <tr><td>12:12-13:20</td><td></td><td>ãŠæ˜¼ä¼‘æ†©</td></tr>
                    <tr><td>13:20-13:28</td><td>10ç­</td><td>å¾ªç’°å‹æ—æ¥­ï¼ˆæœ¨æåˆ©ç”¨ã§æ£®æ—ã‚’å‰µã‚‹ï¼‰</td></tr>
                    <tr><td>13:28-13:36</td><td>11ç­</td><td>èª°ã‚‚ãŒæ¥½ã—ã‚ã‚‹éšœãŒã„è€…ã‚¹ãƒãƒ¼ãƒ„ã‚’å‰µã‚‹</td></tr>
                    <tr><td>13:36-13:44</td><td>12ç­</td><td>ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆã«å¯›å®¹ãªç¤¾ä¼šã‚’å‰µã‚‹</td></tr>
                    <tr><td>13:44-13:52</td><td>13ç­</td><td>ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰µã‚‹</td></tr>
                    <tr><td>13:52-14:00</td><td>14ç­</td><td>ã‚·ã‚¹ãƒ†ãƒ ç†å·¥å­¦éƒ¨ã®PRã‚’å‰µã‚‹</td></tr>
                    <tr><td>14:00-14:08</td><td>15ç­</td><td>çœ æ°—ã‚’å‰µã‚‹</td></tr>
                    <tr><td>14:08-14:16</td><td>16ç­</td><td>ç™’ã‚„ã—ã‚’å‰µã‚‹</td></tr>
                    <tr><td>14:16-14:24</td><td>17ç­</td><td>ç”Ÿç‰©å›³é‘‘ã‚’å‰µã‚‹</td></tr>
                    <tr><td>14:24-</td><td></td><td>è¬›è©•</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- ç·Šæ€¥åœæ­¢ãƒœã‚¿ãƒ³ -->
    <button class="emergency-stop" id="emergencyStop">â¹ï¸ ç·Šæ€¥åœæ­¢</button>
    
    <!-- ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div class="overlay" id="overlay"></div>
    
    <!-- ãƒ™ãƒ«ã®éŸ³æº -->
    <audio id="bellSound" preload="auto">
        <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.wav" type="audio/wav">
        <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3" type="audio/mpeg">
    </audio>

    <!-- ãƒ¢ãƒã‚¤ãƒ«UIåˆ‡ã‚Šæ›¿ãˆ -->
    <div class="mobile-tabs" id="mobileTabs" style="display:none;">
      <button class="mobile-tab-btn active" id="tabTimer">ã‚¿ã‚¤ãƒãƒ¼</button>
      <button class="mobile-tab-btn" id="tabSchedule">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</button>
    </div>
    <div class="mobile-tab-content">
      <div class="mobile-timer active" id="mobileTimer"></div>
      <div class="mobile-schedule" id="mobileSchedule"></div>
    </div>

    <script>
        let schedule = [
            { name: "ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ã‚»ãƒ¬ãƒ¢ãƒ‹ãƒ¼", start: "10:55:00", end: "11:00:00", type: "other", presenter: "", theme: "ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ã‚»ãƒ¬ãƒ¢ãƒ‹ãƒ¼" },
            { name: "1ç­", start: "11:00:00", end: "11:08:00", type: "presentation", presenter: "", theme: "AIç›¸è«‡å“¡ã‚’å‰µã‚‹" },
            { name: "2ç­", start: "11:08:00", end: "11:16:00", type: "presentation", presenter: "", theme: "ãƒªãƒã‚¤ãƒãƒ«ã‚’å‰µã‚‹ ï½èº«è¿‘ã«æ–°ã—ã„äº¤æµã‚’ï½" },
            { name: "3ç­", start: "11:16:00", end: "11:24:00", type: "presentation", presenter: "", theme: "å­¦ã³ã®ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‰µã‚‹" },
            { name: "4ç­", start: "11:24:00", end: "11:32:00", type: "presentation", presenter: "", theme: "å¯è¦–åŒ–ã‚’å‰µã‚‹" },
            { name: "5ç­", start: "11:32:00", end: "11:40:00", type: "presentation", presenter: "", theme: "ã€Œå¾©æ´»ã€ã‚’å‰µã‚‹" },
            { name: "6ç­", start: "11:40:00", end: "11:48:00", type: "presentation", presenter: "", theme: "éŸ³æ¥½ã‚’å‰µã‚‹" },
            { name: "7ç­", start: "11:48:00", end: "11:56:00", type: "presentation", presenter: "", theme: "å‹•ãã‚’å‰µã‚‹" },
            { name: "8ç­", start: "11:56:00", end: "12:04:00", type: "presentation", presenter: "", theme: "æ•£æ­©é“ã‚’å‰µã‚‹" },
            { name: "9ç­", start: "12:04:00", end: "12:12:00", type: "presentation", presenter: "", theme: "å¤§å®®ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã§SDGsçš„ãªå–ã‚Šçµ„ã¿ã‚’å‰µã‚‹" },
            { name: "ãŠæ˜¼ä¼‘æ†©", start: "12:12:00", end: "13:20:00", type: "other", presenter: "", theme: "ãŠæ˜¼ä¼‘æ†©" },
            { name: "10ç­", start: "13:20:00", end: "13:28:00", type: "presentation", presenter: "", theme: "å¾ªç’°å‹æ—æ¥­ï¼ˆæœ¨æåˆ©ç”¨ã§æ£®æ—ã‚’å‰µã‚‹ï¼‰" },
            { name: "11ç­", start: "13:28:00", end: "13:36:00", type: "presentation", presenter: "", theme: "èª°ã‚‚ãŒæ¥½ã—ã‚ã‚‹éšœãŒã„è€…ã‚¹ãƒãƒ¼ãƒ„ã‚’å‰µã‚‹" },
            { name: "12ç­", start: "13:36:00", end: "13:44:00", type: "presentation", presenter: "", theme: "ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆã«å¯›å®¹ãªç¤¾ä¼šã‚’å‰µã‚‹" },
            { name: "13ç­", start: "13:44:00", end: "13:52:00", type: "presentation", presenter: "", theme: "ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰µã‚‹" },
            { name: "14ç­", start: "13:52:00", end: "14:00:00", type: "presentation", presenter: "", theme: "ã‚·ã‚¹ãƒ†ãƒ ç†å·¥å­¦éƒ¨ã®PRã‚’å‰µã‚‹" },
            { name: "15ç­", start: "14:00:00", end: "14:08:00", type: "presentation", presenter: "", theme: "çœ æ°—ã‚’å‰µã‚‹" },
            { name: "16ç­", start: "14:08:00", end: "14:16:00", type: "presentation", presenter: "", theme: "ç™’ã‚„ã—ã‚’å‰µã‚‹" },
            { name: "17ç­", start: "14:16:00", end: "14:24:00", type: "presentation", presenter: "", theme: "ç”Ÿç‰©å›³é‘‘ã‚’å‰µã‚‹" },
            { name: "è¬›è©•", start: "14:24:00", end: "15:00:00", type: "other", presenter: "", theme: "è¬›è©•" }
        ];
        
        // é€šçŸ¥å†ç”Ÿæ¸ˆã¿ãƒ•ãƒ©ã‚°
        const playedFlags = {};

        function createDateFromTimeString(timeString) {
            const today = new Date();
            const [hours, minutes, seconds] = timeString.split(':').map(Number);
            return new Date(today.getFullYear(), today.getMonth(), today.getDate(), hours, minutes, seconds);
        }

        const bell = document.getElementById('bellSound');
        const tableRows = document.querySelectorAll("#scheduleTable tbody tr");
        
        // ãƒ¢ãƒ¼ãƒ‰ç®¡ç†
        let currentMode = 'live'; // 'live' or 'practice'
        let practiceTimer = null;
        let practiceStartTime = null;
        let isPracticeRunning = false;
        let practiceElapsedTime = 0;
        let practiceBellFlags = { sevenMin: false, eightMin: false };

        function updateTimer() {
            let now, currentEvent, currentEventIndex;
            
            // ç·Šæ€¥åœæ­¢ä¸­ã¯æ›´æ–°ã‚’ã‚¹ã‚­ãƒƒãƒ—
            if (isEmergencyStopped && currentMode === 'live') {
                return;
            }
            
            if (currentMode === 'live') {
                // æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ï¼šå®Ÿéš›ã®æ™‚åˆ»ã‚’ä½¿ç”¨
                now = new Date();
                document.getElementById('currentTime').textContent = now.toLocaleTimeString('ja-JP');
                
                // ç¾åœ¨ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¢ã™
                currentEventIndex = -1;
                for(let i=0; i < schedule.length; i++) {
                    const event = schedule[i];
                    const start = createDateFromTimeString(event.start);
                    const end = createDateFromTimeString(event.end);
                    if (now >= start && now < end) {
                        currentEvent = event;
                        currentEventIndex = i;
                        break;
                    }
                }
            } else {
                // ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼š8åˆ†é–“ã®ã‚¿ã‚¤ãƒãƒ¼
                if (isPracticeRunning) {
                    practiceElapsedTime = Date.now() - practiceStartTime;
                }
                
                const totalSeconds = Math.floor(practiceElapsedTime / 1000);
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;
                
                document.getElementById('currentTime').textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                document.getElementById('currentEvent').textContent = 'ç™ºè¡¨ç·´ç¿’';
                
                // æ®‹ã‚Šæ™‚é–“ã‚’è¨ˆç®—ï¼ˆ8åˆ† = 480ç§’ï¼‰
                const remainingSeconds = Math.max(0, 480 - totalSeconds);
                const remainingMinutes = Math.floor(remainingSeconds / 60);
                const remainingSecs = remainingSeconds % 60;
                
                if (remainingSeconds > 0) {
                    document.getElementById('countdown').textContent = `${String(remainingMinutes).padStart(2, '0')}:${String(remainingSecs).padStart(2, '0')}`;
                } else {
                    document.getElementById('countdown').textContent = '00:00';
                }
                
                // ãƒ™ãƒ«éŸ³ã®åˆ¶å¾¡
                if (isPracticeRunning) {
                    // 7åˆ†çµŒéæ™‚ï¼ˆ420ç§’ï¼‰ã®ãƒ™ãƒ«
                    if (totalSeconds >= 420 && !practiceBellFlags.sevenMin) {
                        bell.play().catch(function(error) {
                            console.log('ãƒ™ãƒ«éŸ³ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                        });
                        practiceBellFlags.sevenMin = true;
                    }
                    
                    // 8åˆ†çµŒéæ™‚ï¼ˆ480ç§’ï¼‰ã®ãƒ™ãƒ«
                    if (totalSeconds >= 480 && !practiceBellFlags.eightMin) {
                        bell.play().catch(function(error) {
                            console.log('ãƒ™ãƒ«éŸ³ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                        });
                        practiceBellFlags.eightMin = true;
                    }
                }
                
                document.getElementById('nextEvent').textContent = 'ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰';
                return; // ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ã§ã¯ä»–ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—
            }

            // ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’æ›´æ–°
            tableRows.forEach((row, index) => {
                if(index === currentEventIndex) {
                    row.classList.add('active');
                } else {
                    row.classList.remove('active');
                }
            });

            if (currentEvent) {
                document.getElementById('currentEvent').textContent = currentEvent.name;

                const end = createDateFromTimeString(currentEvent.end);
                const remaining_ms = end - now;
                const remaining_sec_total = Math.ceil(remaining_ms / 1000);
                
                const minutes = Math.floor(remaining_sec_total / 60);
                const seconds = remaining_sec_total % 60;
                document.getElementById('countdown').textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®æ›´æ–°
                const totalDuration = (createDateFromTimeString(currentEvent.end) - createDateFromTimeString(currentEvent.start)) / 1000;
                const elapsed = totalDuration - remaining_sec_total;
                const progressPercent = Math.min(100, Math.max(0, (elapsed / totalDuration) * 100));
                document.getElementById('progressBar').style.width = progressPercent + '%';
                
                // ç™ºè¡¨è€…ã®è¡¨ç¤º
                if (currentEvent.type === 'presentation' && currentEvent.presenter) {
                    document.getElementById('currentPresenter').style.display = 'block';
                    document.getElementById('presenterName').textContent = currentEvent.presenter;
                } else {
                    document.getElementById('currentPresenter').style.display = 'none';
                }
                
                // æ™‚é–“è­¦å‘Šã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                if (remaining_sec_total <= 60) {
                    document.getElementById('countdown').classList.add('time-warning');
                } else {
                    document.getElementById('countdown').classList.remove('time-warning');
                }
                
                // ç™ºè¡¨ã®å ´åˆã®ã¿ãƒ™ãƒ«ã‚’é³´ã‚‰ã™
                if (currentEvent.type === 'presentation') {
                    const start = createDateFromTimeString(currentEvent.start);

                    // é–‹å§‹æ™‚åˆ»ã®ãƒ™ãƒ«
                    const startFlag = `${currentEvent.name}_start`;
                    if (now >= start && now < new Date(start.getTime() + 1000) && !playedFlags[startFlag]) {
                        bell.play().catch(function(error) {
                            console.log('ãƒ™ãƒ«éŸ³ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                        });
                        playedFlags[startFlag] = true;
                    }

                    // çµ‚äº†1åˆ†å‰ã®ãƒ™ãƒ«
                    const oneMinFlag = `${currentEvent.name}_1min`;
                    if (remaining_sec_total === 60 && !playedFlags[oneMinFlag]) {
                        bell.play().catch(function(error) {
                            console.log('ãƒ™ãƒ«éŸ³ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                        });
                        playedFlags[oneMinFlag] = true;
                    }
                }

            } else {
                 document.getElementById('currentEvent').textContent = "æ™‚é–“å¤–ã§ã™";
                 document.getElementById('countdown').textContent = "--:--";
            }

            // æ¬¡ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¡¨ç¤º
            let nextEvent = null;
            if (currentMode === 'live') {
                const firstEventStart = createDateFromTimeString(schedule[0].start);
                if(now < firstEventStart) {
                    nextEvent = schedule[0];
                } else if (currentEventIndex > -1 && currentEventIndex < schedule.length - 1) {
                    nextEvent = schedule[currentEventIndex + 1];
                }
            } else {
                // ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰
                if (currentEventIndex < schedule.length - 1) {
                    nextEvent = schedule[currentEventIndex + 1];
                }
            }

            if(nextEvent) {
                document.getElementById('nextEvent').textContent = `æ¬¡ã®äºˆå®š: ${nextEvent.name} (${nextEvent.start})`;
            } else {
                document.getElementById('nextEvent').textContent = "ã™ã¹ã¦ã®äºˆå®šãŒçµ‚äº†ã—ã¾ã—ãŸã€‚";
            }
        }

        // ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('liveMode').addEventListener('click', function() {
            if (currentMode !== 'live') {
                currentMode = 'live';
                document.getElementById('liveMode').className = 'active';
                document.getElementById('practiceMode').className = 'inactive';
                document.getElementById('practiceControls').style.display = 'none';
                document.body.classList.remove('practice-mode');
                document.getElementById('emergencyStop').style.display = 'block';
                
                // ç·´ç¿’ã‚¿ã‚¤ãƒãƒ¼ã‚’åœæ­¢
                if (practiceTimer) {
                    clearInterval(practiceTimer);
                    practiceTimer = null;
                }
                isPracticeRunning = false;
                
                // æœ¬ç•ªã‚¿ã‚¤ãƒãƒ¼ã‚’é–‹å§‹
                if (!window.liveTimer) {
                    window.liveTimer = setInterval(updateTimer, 1000);
                }
            }
        });

        document.getElementById('practiceMode').addEventListener('click', function() {
            if (currentMode !== 'practice') {
                currentMode = 'practice';
                document.getElementById('practiceMode').className = 'active';
                document.getElementById('liveMode').className = 'inactive';
                document.getElementById('practiceControls').style.display = 'block';
                document.body.classList.add('practice-mode');
                document.getElementById('emergencyStop').style.display = 'none';
                
                // æœ¬ç•ªã‚¿ã‚¤ãƒãƒ¼ã‚’åœæ­¢
                if (window.liveTimer) {
                    clearInterval(window.liveTimer);
                    window.liveTimer = null;
                }
                
                // ç·´ç¿’ã‚¿ã‚¤ãƒãƒ¼ã‚’é–‹å§‹
                if (!practiceTimer) {
                    practiceTimer = setInterval(updateTimer, 1000);
                }
                
                // ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ã®åˆæœŸåŒ–
                practiceElapsedTime = 0;
                isPracticeRunning = false;
                practiceBellFlags = { sevenMin: false, eightMin: false };
            }
        });

        // ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ç”¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
        document.getElementById('startPractice').addEventListener('click', function() {
            if (!isPracticeRunning) {
                isPracticeRunning = true;
                practiceStartTime = Date.now();
                practiceBellFlags = { sevenMin: false, eightMin: false };
                this.textContent = 'â¸ï¸ ä¸€æ™‚åœæ­¢';
                this.className = 'pause-btn';
            } else {
                isPracticeRunning = false;
                this.textContent = 'â–¶ï¸ å†é–‹';
                this.className = 'start-btn';
            }
        });

        document.getElementById('resetPractice').addEventListener('click', function() {
            practiceElapsedTime = 0;
            isPracticeRunning = false;
            practiceBellFlags = { sevenMin: false, eightMin: false };
            document.getElementById('startPractice').textContent = 'â–¶ï¸ é–‹å§‹';
            document.getElementById('startPractice').className = 'start-btn';
        });

        // ç·Šæ€¥åœæ­¢æ©Ÿèƒ½
        let isEmergencyStopped = false;
        document.getElementById('emergencyStop').addEventListener('click', function() {
            if (isEmergencyStopped) {
                // ç·Šæ€¥åœæ­¢ã‚’è§£é™¤
                isEmergencyStopped = false;
                this.textContent = 'â¹ï¸ ç·Šæ€¥åœæ­¢';
                this.style.backgroundColor = '#dc3545';
                document.getElementById('currentEvent').textContent = 'ç™ºè¡¨å†é–‹';
                document.getElementById('countdown').textContent = '--:--';
                document.getElementById('progressBar').style.width = '0%';
                document.getElementById('currentPresenter').style.display = 'none';
            } else {
                // ç·Šæ€¥åœæ­¢
                isEmergencyStopped = true;
                this.textContent = 'â–¶ï¸ å†é–‹';
                this.style.backgroundColor = '#28a745';
                document.getElementById('currentEvent').textContent = 'âš ï¸ ç·Šæ€¥åœæ­¢ä¸­';
                document.getElementById('countdown').textContent = 'STOP';
                document.getElementById('progressBar').style.width = '0%';
                document.getElementById('currentPresenter').style.display = 'none';
            }
        });

        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && isLarge) {
                timerContainer.classList.remove('large');
                overlay.classList.remove('active');
                toggleLargeBtn.textContent = 'ã‚¿ã‚¤ãƒãƒ¼æ‹¡å¤§';
                isLarge = false;
            }
            
            // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§ç·Šæ€¥åœæ­¢/å†é–‹
            if (event.code === 'Space' && currentMode === 'live') {
                event.preventDefault();
                document.getElementById('emergencyStop').click();
            }
            
            // Fã‚­ãƒ¼ã§ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³
            if (event.key === 'f' || event.key === 'F') {
                event.preventDefault();
                document.getElementById('toggleLarge').click();
            }
            
            // Rã‚­ãƒ¼ã§ãƒªã‚»ãƒƒãƒˆï¼ˆç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼‰
            if ((event.key === 'r' || event.key === 'R') && currentMode === 'practice') {
                event.preventDefault();
                document.getElementById('resetPractice').click();
            }
        });

        // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç·¨é›†æ©Ÿèƒ½
        function createScheduleEditor() {
            const editor = document.getElementById('scheduleEditor');
            editor.innerHTML = '';
            
            schedule.forEach((item, index) => {
                const row = document.createElement('div');
                row.className = 'schedule-row';
                row.innerHTML = `
                    <input type="text" placeholder="æ™‚é–“ (ä¾‹: 11:00-11:08)" value="${item.start}-${item.end}" data-field="time" data-index="${index}">
                    <input type="text" placeholder="ç™ºè¡¨å" value="${item.name}" data-field="name" data-index="${index}">
                    <input type="text" placeholder="ç™ºè¡¨è€…å (ä»»æ„)" value="${item.presenter}" data-field="presenter" data-index="${index}">
                    <button class="remove-btn" onclick="removeScheduleRow(${index})">ğŸ—‘ï¸</button>
                `;
                editor.appendChild(row);
            });
        }

        function removeScheduleRow(index) {
            if (schedule.length > 1) {
                schedule.splice(index, 1);
                createScheduleEditor();
            }
        }

        function addScheduleRow() {
            schedule.push({
                name: "æ–°ã—ã„ç™ºè¡¨",
                start: "00:00",
                end: "00:08",
                type: "presentation",
                presenter: "",
                theme: "æ–°ã—ã„ç™ºè¡¨"
            });
            createScheduleEditor();
        }

        function saveSchedule() {
            const inputs = document.querySelectorAll('#scheduleEditor input');
            const newSchedule = [];
            
            for (let i = 0; i < inputs.length; i += 3) {
                const timeInput = inputs[i];
                const nameInput = inputs[i + 1];
                const presenterInput = inputs[i + 2];
                
                if (timeInput && nameInput) {
                    const timeValue = timeInput.value;
                    const timeParts = timeValue.split('-');
                    
                    if (timeParts.length === 2) {
                        newSchedule.push({
                            name: nameInput.value || "ç™ºè¡¨",
                            start: timeParts[0].trim(),
                            end: timeParts[1].trim(),
                            type: "presentation",
                            presenter: presenterInput ? presenterInput.value : "",
                            theme: "æ–°ã—ã„ç™ºè¡¨" // ãƒ†ãƒ¼ãƒã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§"æ–°ã—ã„ç™ºè¡¨"
                        });
                    }
                }
            }
            
            if (newSchedule.length > 0) {
                schedule = newSchedule;
                updateScheduleTable();
                document.getElementById('editSchedule').style.display = 'none';
                document.getElementById('scheduleTable').style.display = 'table';
            }
        }

        function updateScheduleTable() {
            const tbody = document.querySelector('#scheduleTable tbody');
            tbody.innerHTML = '';
            
            schedule.forEach(item => {
                const row = document.createElement('tr');
                const timeText = `${item.start}-${item.end}`;
                const presenterText = item.presenter || '';
                
                row.innerHTML = `
                    <td>${timeText}</td>
                    <td>${item.name}</td>
                    <td>${item.theme}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç·¨é›†ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('editScheduleBtn').addEventListener('click', function() {
            document.getElementById('editSchedule').style.display = 'block';
            document.getElementById('scheduleTable').style.display = 'none';
            createScheduleEditor();
        });

        document.getElementById('saveSchedule').addEventListener('click', saveSchedule);
        document.getElementById('cancelEdit').addEventListener('click', function() {
            document.getElementById('editSchedule').style.display = 'none';
            document.getElementById('scheduleTable').style.display = 'table';
        });

        document.getElementById('addScheduleRow').addEventListener('click', addScheduleRow);

        // åˆæœŸåŒ–
        window.liveTimer = setInterval(updateTimer, 1000);
        updateTimer(); // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å³æ™‚å®Ÿè¡Œ

        // ãƒ™ãƒ«éŸ³ãƒ†ã‚¹ãƒˆãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('testBell').addEventListener('click', function() {
            bell.play().catch(function(error) {
                console.log('ãƒ™ãƒ«éŸ³ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                alert('ãƒ™ãƒ«éŸ³ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
            });
        });

        // ã‚¿ã‚¤ãƒãƒ¼æ‹¡å¤§ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        const timerContainer = document.querySelector('.timer-container');
        const overlay = document.getElementById('overlay');
        const toggleLargeBtn = document.getElementById('toggleLarge');
        let isLarge = false;

        toggleLargeBtn.addEventListener('click', function() {
            if (isLarge) {
                // é€šå¸¸ã‚µã‚¤ã‚ºã«æˆ»ã™
                timerContainer.classList.remove('large');
                overlay.classList.remove('active');
                toggleLargeBtn.textContent = 'ã‚¿ã‚¤ãƒãƒ¼æ‹¡å¤§';
                isLarge = false;
            } else {
                // æ‹¡å¤§è¡¨ç¤º
                timerContainer.classList.add('large');
                overlay.classList.add('active');
                toggleLargeBtn.textContent = 'ã‚¿ã‚¤ãƒãƒ¼ç¸®å°';
                isLarge = true;
            }
        });

        // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚¯ãƒªãƒƒã‚¯ã§ç¸®å°
        overlay.addEventListener('click', function() {
            if (isLarge) {
                timerContainer.classList.remove('large');
                overlay.classList.remove('active');
                toggleLargeBtn.textContent = 'ã‚¿ã‚¤ãƒãƒ¼æ‹¡å¤§';
                isLarge = false;
            }
        });

        // ESCã‚­ãƒ¼ã§ç¸®å°
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && isLarge) {
                timerContainer.classList.remove('large');
                overlay.classList.remove('active');
                toggleLargeBtn.textContent = 'ã‚¿ã‚¤ãƒãƒ¼æ‹¡å¤§';
                isLarge = false;
            }
        });

        // ãƒ¢ãƒã‚¤ãƒ«UIåˆ‡ã‚Šæ›¿ãˆ
        function isMobile() {
          return window.innerWidth <= 600;
        }
        function showMobileUI() {
          document.getElementById('mobileTabs').style.display = 'flex';
          document.querySelector('.main-container').style.display = 'none';
          document.querySelector('h1').style.display = 'block';
          // ã‚¿ã‚¤ãƒãƒ¼éƒ¨åˆ†ã‚’mobileTimerã«ç§»å‹•
          document.getElementById('mobileTimer').appendChild(document.querySelector('.timer-container'));
          // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«éƒ¨åˆ†ã‚’mobileScheduleã«ç§»å‹•
          document.getElementById('mobileSchedule').appendChild(document.querySelector('.right-section'));
        }
        function hideMobileUI() {
          document.getElementById('mobileTabs').style.display = 'none';
          document.querySelector('.main-container').style.display = 'flex';
          document.querySelector('h1').style.display = 'block';
          // å…ƒã«æˆ»ã™
          document.querySelector('.left-section').appendChild(document.querySelector('.timer-container'));
          document.querySelector('.main-container').appendChild(document.querySelector('.right-section'));
        }
        function handleResize() {
          if (isMobile()) {
            showMobileUI();
          } else {
            hideMobileUI();
          }
        }
        window.addEventListener('resize', handleResize);
        document.addEventListener('DOMContentLoaded', handleResize);
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        if (document.getElementById('tabTimer')) {
          document.getElementById('tabTimer').onclick = function() {
            document.getElementById('tabTimer').classList.add('active');
            document.getElementById('tabSchedule').classList.remove('active');
            document.getElementById('mobileTimer').classList.add('active');
            document.getElementById('mobileSchedule').classList.remove('active');
          };
          document.getElementById('tabSchedule').onclick = function() {
            document.getElementById('tabSchedule').classList.add('active');
            document.getElementById('tabTimer').classList.remove('active');
            document.getElementById('mobileSchedule').classList.add('active');
            document.getElementById('mobileTimer').classList.remove('active');
          };
        }
    </script>
    <!-- ã‚¿ã‚¤ãƒãƒ¼ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ¢ãƒã‚¤ãƒ«æç”»ç”¨JSï¼ˆbodyæœ«å°¾scriptå†…ï¼‰ -->
    <script>
function renderMobileTimer() {
  // ç¾åœ¨ã®ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—
  let now = new Date();
  let currentEvent = null;
  let currentEventIndex = -1;
  for(let i=0; i < schedule.length; i++) {
    const event = schedule[i];
    const start = createDateFromTimeString(event.start);
    const end = createDateFromTimeString(event.end);
    if (now >= start && now < end) {
      currentEvent = event;
      currentEventIndex = i;
      break;
    }
  }
  // æ®‹ã‚Šæ™‚é–“è¨ˆç®—
  let countdown = '--:--';
  let progress = 0;
  if (currentEvent) {
    const end = createDateFromTimeString(currentEvent.end);
    const total = (createDateFromTimeString(currentEvent.end) - createDateFromTimeString(currentEvent.start)) / 1000;
    const remain = Math.ceil((end - now) / 1000);
    const min = Math.floor(remain / 60);
    const sec = remain % 60;
    countdown = `${String(min).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
    progress = Math.min(100, Math.max(0, ((total-remain)/total)*100));
  }
  // HTMLç”Ÿæˆ
  let html = '';
  html += `<div class='event-big'>${currentEvent ? currentEvent.name : 'é–‹å§‹ã¾ã§ãŠå¾…ã¡ãã ã•ã„...'}</div>`;
  if(currentEvent && currentEvent.theme) {
    html += `<div class='theme-big'>${currentEvent.theme}</div>`;
  }
  html += `<div class='countdown-big'>${countdown}</div>`;
  html += `<div class='progress-container'><div class='progress-bar' style='width:${progress}%;'></div></div>`;
  document.getElementById('mobileTimer').innerHTML = html;
}
function renderMobileSchedule() {
  let now = new Date();
  let currentEventIndex = -1;
  for(let i=0; i < schedule.length; i++) {
    const event = schedule[i];
    const start = createDateFromTimeString(event.start);
    const end = createDateFromTimeString(event.end);
    if (now >= start && now < end) {
      currentEventIndex = i;
      break;
    }
  }
  let html = '<ul class="mobile-schedule-list">';
  schedule.forEach((item, idx) => {
    let active = idx === currentEventIndex ? 'active' : '';
    html += `<li class='mobile-schedule-card ${active}'>`;
    html += `<div class='time'>${item.start} - ${item.end}</div>`;
    html += `<div class='name'>${item.name}</div>`;
    if(item.theme) html += `<div class='theme'>${item.theme}</div>`;
    html += `</li>`;
  });
  html += '</ul>';
  document.getElementById('mobileSchedule').innerHTML = html;
}
// ãƒ¢ãƒã‚¤ãƒ«UIåˆ‡ã‚Šæ›¿ãˆæ™‚ã«æç”»
function updateMobileViews() {
  if (window.innerWidth <= 600) {
    renderMobileTimer();
    renderMobileSchedule();
  }
}
window.addEventListener('resize', updateMobileViews);
setInterval(updateMobileViews, 1000);
document.addEventListener('DOMContentLoaded', updateMobileViews);
</script>

</body>
</html>
